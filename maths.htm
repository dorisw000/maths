<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•¸å­¸æ‰“åœ°é¼ </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Sans MS', 'å¾®è»Ÿæ­£é»‘é«”', sans-serif;
        }

        body {
            background-color: #8BC34A; /* æ·ºç¶ è‰²èƒŒæ™¯ */
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            background-image: radial-gradient(circle, #a5d6a7 10%, transparent 11%),
                              radial-gradient(circle at bottom left, #a5d6a7 5%, transparent 6%),
                              radial-gradient(circle at bottom right, #a5d6a7 5%, transparent 6%);
            background-size: 50px 50px;
            background-position: 0 0, 20px 20px, 20px 20px;
        }

        .container {
            max-width: 800px;
            width: 100%;
            text-align: center;
        }

        h1 {
            color: #795548; /* æ£•è‰²æ¨™é¡Œ */
            margin-bottom: 20px;
            text-shadow: 2px 2px 0 #FFEB3B; /* é»ƒè‰²é™°å½± */
            font-size: 2.8rem;
            background-color: rgba(255, 235, 59, 0.8);
            padding: 10px 20px;
            border-radius: 15px;
            display: inline-block;
            border: 4px dashed #795548;
        }

        .game-info {
            background-color: #795548; /* æ£•è‰² */
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-around;
            font-size: 1.2rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .question-display {
            background-color: #FFEB3B; /* é»ƒè‰² */
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 2.2rem; /* å¢å¤§é¡Œç›®å­—é«” */
            font-weight: bold;
            color: #795548; /* æ£•è‰² */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            border: 3px solid #795548;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .moles-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px; /* å¢åŠ é–“è· */
            margin-bottom: 30px;
        }

        .mole-hole {
            position: relative;
            height: 140px; /* å¢åŠ é«˜åº¦ */
            background-color: #795548; /* æ£•è‰² */
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            cursor: pointer;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
            border: 3px solid #5D4037;
        }

        .mole {
            position: absolute;
            bottom: -80px;
            transition: bottom 0.3s ease;
            font-size: 3.5rem; /* å¢å¤§åœ°é¼ åœ–æ¨™ */
            z-index: 1;
        }

        .mole.active {
            bottom: 15px;
        }

        .mole-number {
            position: absolute;
            top: 5px;
            font-size: 2.5rem; /* å¤§å¹…å¢å¤§æ•¸å­—å­—é«” */
            font-weight: bold;
            color: #4CAF50; /* æ·±ç¶ è‰² */
            z-index: 2;
            background-color: rgba(255, 255, 255, 0.95);
            width: 60px; /* å¢å¤§å®¹å™¨ */
            height: 60px; /* å¢å¤§å®¹å™¨ */
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 3px solid #4CAF50;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        button {
            background-color: #4CAF50; /* æ·±ç¶ è‰² */
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.3rem; /* å¢å¤§æŒ‰éˆ•å­—é«” */
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            font-weight: bold;
        }

        button:hover {
            background-color: #388E3C;
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(1px);
        }

        .difficulty-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .difficulty-btn {
            background-color: #FFC107; /* é»ƒè‰² */
            color: #795548; /* æ£•è‰² */
        }

        .difficulty-btn.active {
            background-color: #FF9800;
            font-weight: bold;
        }

        .result {
            background-color: #FFC107; /* é»ƒè‰² */
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
            border: 3px solid #795548;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            font-size: 1.3rem; /* å¢å¤§çµæœå­—é«” */
        }

        .champion {
            background-color: #4CAF50; /* æ·±ç¶ è‰² */
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            width: 100%;
            border: 3px solid #795548;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            font-size: 1.2rem; /* å¢å¤§å† è»è¨˜éŒ„å­—é«” */
        }

        .game-instructions {
            background-color: rgba(255, 235, 59, 0.8);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            color: #795548;
            font-size: 1.3rem; /* å¢å¤§èªªæ˜å­—é«” */
            border: 2px dashed #795548;
        }

        @media (max-width: 600px) {
            .moles-container {
                gap: 15px;
            }
            
            .mole-hole {
                height: 120px;
            }
            
            .mole {
                font-size: 3rem;
            }
            
            .mole-number {
                font-size: 2rem;
                width: 50px;
                height: 50px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .question-display {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>æ•¸å­¸æ‰“åœ°é¼  ğŸ¹</h1>
        
        <div class="game-instructions">
            <p>é¸æ“‡é¡Œç›®æ•¸é‡ï¼Œé»æ“Šé–‹å§‹éŠæˆ²ï¼Œæ‰¾å‡ºæ­£ç¢ºç­”æ¡ˆçš„åœ°é¼ ï¼</p>
        </div>
        
        <div class="difficulty-selector">
            <button class="difficulty-btn active" data-questions="5">5é¡Œ</button>
            <button class="difficulty-btn" data-questions="10">10é¡Œ</button>
            <button class="difficulty-btn" data-questions="15">15é¡Œ</button>
        </div>
        
        <div class="controls">
            <button id="start-btn">é–‹å§‹éŠæˆ²</button>
        </div>
        
        <div class="game-info">
            <div>æ™‚é–“: <span id="time">0</span>ç§’</div>
            <div>å¾—åˆ†: <span id="score">0</span></div>
            <div>é¡Œç›®: <span id="current">0</span>/<span id="total">5</span></div>
        </div>
        
        <div class="question-display" id="question">é»æ“Šé–‹å§‹éŠæˆ²</div>
        
        <div class="moles-container" id="moles-container">
            <!-- åœ°é¼ æ´å°‡é€šéJavaScriptå‹•æ…‹ç”Ÿæˆ -->
        </div>
        
        <div class="result" id="result">
            <h2>éŠæˆ²çµæŸ!</h2>
            <p>ä½ çš„å¾—åˆ†: <span id="final-score">0</span></p>
            <p>ç”¨æ™‚: <span id="final-time">0</span>ç§’</p>
            <button id="restart-btn">å†ç©ä¸€æ¬¡</button>
        </div>
        
        <div class="champion" id="champion">
            <h3>ğŸ† å† è»è¨˜éŒ„ ğŸ†</h3>
            <p id="champion-info">æš«ç„¡è¨˜éŒ„</p>
        </div>
    </div>

    <script>
        // é¡Œç›®åº« - ä½¿ç”¨æ‚¨æä¾›çš„66é“é¡Œç›®
        const questionBank = [
            // åŠ æ³•é¡Œç›® (1-30)
            { question: "5 + 6 = ?", answer: 11 },
            { question: "5 + 7 = ?", answer: 12 },
            { question: "5 + 8 = ?", answer: 13 },
            { question: "5 + 9 = ?", answer: 14 },
            { question: "6 + 5 = ?", answer: 11 },
            { question: "6 + 6 = ?", answer: 12 },
            { question: "6 + 7 = ?", answer: 13 },
            { question: "6 + 8 = ?", answer: 14 },
            { question: "6 + 9 = ?", answer: 15 },
            { question: "7 + 4 = ?", answer: 11 },
            { question: "7 + 5 = ?", answer: 12 },
            { question: "7 + 6 = ?", answer: 13 },
            { question: "7 + 7 = ?", answer: 14 },
            { question: "7 + 8 = ?", answer: 15 },
            { question: "7 + 9 = ?", answer: 16 },
            { question: "8 + 3 = ?", answer: 11 },
            { question: "8 + 4 = ?", answer: 12 },
            { question: "8 + 5 = ?", answer: 13 },
            { question: "8 + 6 = ?", answer: 14 },
            { question: "8 + 7 = ?", answer: 15 },
            { question: "8 + 8 = ?", answer: 16 },
            { question: "8 + 9 = ?", answer: 17 },
            { question: "9 + 2 = ?", answer: 11 },
            { question: "9 + 3 = ?", answer: 12 },
            { question: "9 + 4 = ?", answer: 13 },
            { question: "9 + 5 = ?", answer: 14 },
            { question: "9 + 6 = ?", answer: 15 },
            { question: "9 + 7 = ?", answer: 16 },
            { question: "9 + 8 = ?", answer: 17 },
            { question: "9 + 9 = ?", answer: 18 },
            
            // æ¸›æ³•é¡Œç›® (31-66)
            { question: "18 - 9 = ?", answer: 9 },
            { question: "17 - 9 = ?", answer: 8 },
            { question: "17 - 8 = ?", answer: 9 },
            { question: "16 - 9 = ?", answer: 7 },
            { question: "16 - 8 = ?", answer: 8 },
            { question: "16 - 7 = ?", answer: 9 },
            { question: "15 - 9 = ?", answer: 6 },
            { question: "15 - 8 = ?", answer: 7 },
            { question: "15 - 7 = ?", answer: 8 },
            { question: "15 - 6 = ?", answer: 9 },
            { question: "14 - 9 = ?", answer: 5 },
            { question: "14 - 8 = ?", answer: 6 },
            { question: "14 - 7 = ?", answer: 7 },
            { question: "14 - 6 = ?", answer: 8 },
            { question: "14 - 5 = ?", answer: 9 },
            { question: "13 - 9 = ?", answer: 4 },
            { question: "13 - 8 = ?", answer: 5 },
            { question: "13 - 7 = ?", answer: 6 },
            { question: "13 - 6 = ?", answer: 7 },
            { question: "13 - 5 = ?", answer: 8 },
            { question: "13 - 4 = ?", answer: 9 },
            { question: "12 - 9 = ?", answer: 3 },
            { question: "12 - 8 = ?", answer: 4 },
            { question: "12 - 7 = ?", answer: 5 },
            { question: "12 - 6 = ?", answer: 6 },
            { question: "12 - 5 = ?", answer: 7 },
            { question: "12 - 4 = ?", answer: 8 },
            { question: "12 - 3 = ?", answer: 9 },
            { question: "11 - 9 = ?", answer: 2 },
            { question: "11 - 8 = ?", answer: 3 },
            { question: "11 - 7 = ?", answer: 4 },
            { question: "11 - 6 = ?", answer: 5 },
            { question: "11 - 5 = ?", answer: 6 },
            { question: "11 - 4 = ?", answer: 7 },
            { question: "11 - 3 = ?", answer: 8 },
            { question: "11 - 2 = ?", answer: 9 }
        ];

        // éŠæˆ²è®Šæ•¸
        let score = 0;
        let currentQuestion = 0;
        let totalQuestions = 5;
        let time = 0;
        let timer;
        let isPlaying = false;
        let questions = [];
        let currentCorrectAnswer;
        let championScore = localStorage.getItem('championScore') || 0;
        let championTime = localStorage.getItem('championTime') || 999;

        // DOMå…ƒç´ 
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');
        const timeDisplay = document.getElementById('time');
        const scoreDisplay = document.getElementById('score');
        const currentDisplay = document.getElementById('current');
        const totalDisplay = document.getElementById('total');
        const questionDisplay = document.getElementById('question');
        const molesContainer = document.getElementById('moles-container');
        const resultDisplay = document.getElementById('result');
        const finalScoreDisplay = document.getElementById('final-score');
        const finalTimeDisplay = document.getElementById('final-time');
        const championInfo = document.getElementById('champion-info');
        const difficultyBtns = document.querySelectorAll('.difficulty-btn');

        // åˆå§‹åŒ–åœ°é¼ æ´
        function initMoles() {
            molesContainer.innerHTML = '';
            for (let i = 0; i < 9; i++) {
                const moleHole = document.createElement('div');
                moleHole.className = 'mole-hole';
                moleHole.innerHTML = `
                    <div class="mole">ğŸ¹</div>
                    <div class="mole-number"></div>
                `;
                moleHole.addEventListener('click', () => checkAnswer(moleHole));
                molesContainer.appendChild(moleHole);
            }
        }

        // å¾é¡Œç›®åº«ä¸­éš¨æ©Ÿé¸æ“‡é¡Œç›®
        function getRandomQuestions(count) {
            // è¤‡è£½é¡Œç›®åº«
            const shuffled = [...questionBank];
            // æ´—ç‰Œç®—æ³•éš¨æ©Ÿæ’åº
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            // è¿”å›å‰countå€‹é¡Œç›®
            return shuffled.slice(0, count);
        }

        // é–‹å§‹éŠæˆ²
        function startGame() {
            if (isPlaying) return;
            
            // é‡ç½®éŠæˆ²ç‹€æ…‹
            score = 0;
            currentQuestion = 0;
            time = 0;
            isPlaying = true;
            
            // æ›´æ–°é¡¯ç¤º
            scoreDisplay.textContent = score;
            currentDisplay.textContent = currentQuestion;
            totalDisplay.textContent = totalQuestions;
            timeDisplay.textContent = time;
            
            // å¾é¡Œç›®åº«ä¸­éš¨æ©Ÿé¸æ“‡é¡Œç›®
            questions = getRandomQuestions(totalQuestions);
            
            // éš±è—çµæœï¼Œé¡¯ç¤ºéŠæˆ²å€åŸŸ
            resultDisplay.style.display = 'none';
            
            // é–‹å§‹è¨ˆæ™‚
            timer = setInterval(() => {
                time++;
                timeDisplay.textContent = time;
            }, 1000);
            
            // é¡¯ç¤ºç¬¬ä¸€é¡Œ
            showNextQuestion();
            
            // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
            startBtn.disabled = true;
            
            // æ›´æ–°é›£åº¦æŒ‰éˆ•ç‹€æ…‹
            difficultyBtns.forEach(btn => {
                btn.disabled = true;
            });
        }

        // é¡¯ç¤ºä¸‹ä¸€é¡Œ
        function showNextQuestion() {
            if (currentQuestion >= totalQuestions) {
                endGame();
                return;
            }
            
            const question = questions[currentQuestion];
            questionDisplay.textContent = question.question;
            currentCorrectAnswer = question.answer;
            
            // éš¨æ©Ÿé¸æ“‡4å€‹æ´é¡¯ç¤ºåœ°é¼ 
            const moleHoles = document.querySelectorAll('.mole-hole');
            const selectedHoles = [];
            
            // é‡ç½®æ‰€æœ‰åœ°é¼ æ´
            moleHoles.forEach(hole => {
                hole.querySelector('.mole').classList.remove('active');
                hole.querySelector('.mole-number').textContent = '';
                hole.style.backgroundColor = '#795548';
            });
            
            // éš¨æ©Ÿé¸æ“‡4å€‹æ´
            while (selectedHoles.length < 4) {
                const randomIndex = Math.floor(Math.random() * 9);
                if (!selectedHoles.includes(randomIndex)) {
                    selectedHoles.push(randomIndex);
                }
            }
            
            // åœ¨å…¶ä¸­ä¸€å€‹æ´é¡¯ç¤ºæ­£ç¢ºç­”æ¡ˆ
            const correctHoleIndex = Math.floor(Math.random() * 4);
            moleHoles[selectedHoles[correctHoleIndex]].querySelector('.mole-number').textContent = currentCorrectAnswer;
            
            // åœ¨å…¶ä»–ä¸‰å€‹æ´é¡¯ç¤ºéŒ¯èª¤ç­”æ¡ˆ
            let wrongAnswers = [];
            while (wrongAnswers.length < 3) {
                // ç”Ÿæˆä¸€å€‹èˆ‡æ­£ç¢ºç­”æ¡ˆä¸åŒçš„éŒ¯èª¤ç­”æ¡ˆ
                let wrongAnswer;
                do {
                    wrongAnswer = Math.floor(Math.random() * 19); // 0-18
                } while (wrongAnswer === currentCorrectAnswer || wrongAnswers.includes(wrongAnswer));
                
                wrongAnswers.push(wrongAnswer);
            }
            
            // å°‡éŒ¯èª¤ç­”æ¡ˆåˆ†é…åˆ°å…¶ä»–ä¸‰å€‹æ´
            let wrongIndex = 0;
            for (let i = 0; i < 4; i++) {
                if (i !== correctHoleIndex) {
                    moleHoles[selectedHoles[i]].querySelector('.mole-number').textContent = wrongAnswers[wrongIndex];
                    wrongIndex++;
                }
            }
            
            // é¡¯ç¤ºåœ°é¼ 
            selectedHoles.forEach(index => {
                moleHoles[index].querySelector('.mole').classList.add('active');
            });
            
            currentQuestion++;
            currentDisplay.textContent = currentQuestion;
        }

        // æª¢æŸ¥ç­”æ¡ˆ
        function checkAnswer(moleHole) {
            if (!isPlaying) return;
            
            const selectedNumber = parseInt(moleHole.querySelector('.mole-number').textContent);
            
            if (selectedNumber === currentCorrectAnswer) {
                // æ­£ç¢ºç­”æ¡ˆ
                score++;
                scoreDisplay.textContent = score;
                
                // é¡¯ç¤ºæ­£ç¢ºåé¥‹
                moleHole.style.backgroundColor = '#4CAF50';
                setTimeout(() => {
                    moleHole.style.backgroundColor = '#795548';
                    showNextQuestion();
                }, 500);
            } else {
                // éŒ¯èª¤ç­”æ¡ˆ
                moleHole.style.backgroundColor = '#F44336';
                setTimeout(() => {
                    moleHole.style.backgroundColor = '#795548';
                    showNextQuestion();
                }, 500);
            }
        }

        // çµæŸéŠæˆ²
        function endGame() {
            isPlaying = false;
            clearInterval(timer);
            
            // éš±è—æ‰€æœ‰åœ°é¼ 
            document.querySelectorAll('.mole').forEach(mole => {
                mole.classList.remove('active');
            });
            
            // é¡¯ç¤ºçµæœ
            resultDisplay.style.display = 'block';
            finalScoreDisplay.textContent = score;
            finalTimeDisplay.textContent = time;
            
            // æª¢æŸ¥æ˜¯å¦ç‚ºå† è»
            let isChampion = false;
            if (score > championScore || (score == championScore && time < championTime)) {
                isChampion = true;
                championScore = score;
                championTime = time;
                localStorage.setItem('championScore', championScore);
                localStorage.setItem('championTime', championTime);
                
                // é¡¯ç¤ºå† è»å‹•ç•«æ•ˆæœ
                championInfo.innerHTML = `ğŸ† æ–°ç´€éŒ„ï¼ ğŸ†<br>å¾—åˆ†: ${championScore} | ç”¨æ™‚: ${championTime}ç§’`;
                document.getElementById('champion').style.animation = 'pulse 1s infinite';
                
                // æ·»åŠ CSSå‹•ç•«
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes pulse {
                        0% { transform: scale(1); }
                        50% { transform: scale(1.05); }
                        100% { transform: scale(1); }
                    }
                `;
                document.head.appendChild(style);
            } else {
                updateChampionInfo();
            }
            
            // å•Ÿç”¨é–‹å§‹æŒ‰éˆ•
            startBtn.disabled = false;
            
            // å•Ÿç”¨é›£åº¦æŒ‰éˆ•
            difficultyBtns.forEach(btn => {
                btn.disabled = false;
            });
        }

        // æ›´æ–°å† è»ä¿¡æ¯
        function updateChampionInfo() {
            if (championScore > 0) {
                championInfo.textContent = `å¾—åˆ†: ${championScore} | ç”¨æ™‚: ${championTime}ç§’`;
            } else {
                championInfo.textContent = 'æš«ç„¡è¨˜éŒ„';
            }
        }

        // è¨­ç½®é›£åº¦
        function setDifficulty(questionsCount) {
            totalQuestions = questionsCount;
            totalDisplay.textContent = totalQuestions;
            
            // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
            difficultyBtns.forEach(btn => {
                btn.classList.remove('active');
                if (parseInt(btn.dataset.questions) === questionsCount) {
                    btn.classList.add('active');
                }
            });
        }

        // äº‹ä»¶ç›£è½
        startBtn.addEventListener('click', startGame);
        restartBtn.addEventListener('click', () => {
            resultDisplay.style.display = 'none';
            startGame();
        });

        difficultyBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                setDifficulty(parseInt(btn.dataset.questions));
            });
        });

        // åˆå§‹åŒ–
        initMoles();
        updateChampionInfo();
    </script>
</body>
</html>